<Window x:Class="craftingTask.view.windows.windows_dialogs.SearchWindow"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  Title="Búsqueda Avanzada" Width="900" Height="750"
  AllowsTransparency="True" Background="{x:Null}"
  WindowStartupLocation="CenterScreen" WindowStyle="None" mc:Ignorable="d">
  <Border Background="{StaticResource MainBackground}" CornerRadius="12">
    <Grid>
      <Grid.RowDefinitions>
        <RowDefinition Height="22" />
        <RowDefinition Height="*" />
      </Grid.RowDefinitions>

      <!--  Title Bar  -->
      <Grid x:Name="titleBar" Grid.Row="0">
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="*" />
          <ColumnDefinition Width="22" />
          <ColumnDefinition Width="22" />
        </Grid.ColumnDefinitions>
        <Button x:Name="minimizeButton" Grid.Column="1" Width="auto"
          Height="auto" Margin="4,6,6,4" Click="btnMinimizeWindowClick"
          Style="{StaticResource MinimizeWindowButton}" />
        <Button x:Name="closeButton" Grid.Column="2" Width="auto" Height="auto"
          Margin="4,6,6,4" Click="btnCloseWindowClick"
          Style="{StaticResource CloseWindowButton}" />
      </Grid>

      <!--  Main Content  -->
      <Grid x:Name="content" Grid.Row="1">
        <Grid.RowDefinitions>
          <RowDefinition Height="Auto" />
          <RowDefinition Height="*" />
          <RowDefinition Height="40" />
        </Grid.RowDefinitions>

        <!--  Search Criteria Panel  -->
        <ScrollViewer Grid.Row="0" MaxHeight="350"
          VerticalScrollBarVisibility="Auto">
          <ScrollViewer.Resources>
            <Style TargetType="ScrollBar" BasedOn="{StaticResource DarkScrollBarStyle}" />
          </ScrollViewer.Resources>
          <Border Margin="10" CornerRadius="12">
            <StackPanel>
              <!--  Title  -->
              <TextBlock Margin="15,20,15,10" FontSize="28" FontWeight="Bold"
                Foreground="{StaticResource MainForeground}"
                Text="BÚSQUEDA AVANZADA" />

              <!--  Keyword Search  -->
              <Grid Margin="15,10">
                <Grid.RowDefinitions>
                  <RowDefinition Height="Auto" />
                  <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <TextBlock Grid.Row="0" Margin="0,0,0,5" FontSize="16"
                  FontWeight="SemiBold"
                  Foreground="{StaticResource MainForeground}"
                  Text="PALABRA CLAVE" />
                <TextBox x:Name="txtKeyword" Grid.Row="1" Height="35"
                  FontSize="16" Style="{StaticResource TaskTitleDarkTextBox}"
                  TextChanged="txtKeyword_TextChanged" />
              </Grid>

              <!--  Filters Row 1: Priority and Status  -->
              <Grid Margin="15,10">
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="*" />
                  <ColumnDefinition Width="10" />
                  <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!--  Priority Filter  -->
                <StackPanel Grid.Column="0">
                  <TextBlock Margin="0,0,0,5" FontSize="16"
                    FontWeight="SemiBold"
                    Foreground="{StaticResource MainForeground}"
                    Text="PRIORIDAD" />
                  <ListBox x:Name="lstPriorities" Height="130" Style="{StaticResource ModernDarkListBoxStyle}" ItemContainerStyle="{StaticResource ModernDarkListBoxItemStyle}"
                    Background="{StaticResource SecondaryBackground}"
                    Foreground="{StaticResource MainForeground}"
                    SelectionMode="Multiple" />
                </StackPanel>

                <!--  Status Filter  -->
                <StackPanel Grid.Column="2">
                  <TextBlock Margin="0,0,0,5" FontSize="16"
                    FontWeight="SemiBold"
                    Foreground="{StaticResource MainForeground}"
                    Text="ESTADO" />
                  <ListBox x:Name="lstStatus" Height="130" Style="{StaticResource ModernDarkListBoxStyle}" ItemContainerStyle="{StaticResource ModernDarkListBoxItemStyle}"
                    Background="{StaticResource SecondaryBackground}"
                    Foreground="{StaticResource MainForeground}"
                    SelectionMode="Multiple" />
                </StackPanel>
              </Grid>

              <!--  Filters Row 2: Date Range  -->
              <Grid Margin="15,10">
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="*" />
                  <ColumnDefinition Width="10" />
                  <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!--  Start Date  -->
                <StackPanel Grid.Column="0">
                  <TextBlock Margin="0,0,0,5" FontSize="16"
                    FontWeight="SemiBold"
                    Foreground="{StaticResource MainForeground}"
                    Text="FECHA INICIO" />
                  <DatePicker x:Name="dpStartDate" Height="35" FontSize="16"
                    Style="{StaticResource SimpleDarkDatePickerStyle}" />
                </StackPanel>

                <!--  End Date  -->
                <StackPanel Grid.Column="2">
                  <TextBlock Margin="0,0,0,5" FontSize="16"
                    FontWeight="SemiBold"
                    Foreground="{StaticResource MainForeground}"
                    Text="FECHA FIN" />
                  <DatePicker x:Name="dpEndDate" Height="35" FontSize="16"
                    Style="{StaticResource SimpleDarkDatePickerStyle}" />
                </StackPanel>
              </Grid>

              <!--  Filters Row 3: Panel and Board  -->
              <Grid Margin="15,10">
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="*" />
                  <ColumnDefinition Width="10" />
                  <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!--  Panel Filter  -->
                <StackPanel Grid.Column="0">
                  <TextBlock Margin="0,0,0,5" FontSize="16"
                    FontWeight="SemiBold"
                    Foreground="{StaticResource MainForeground}" Text="PANEL" />
                  <ListBox x:Name="lstPanels" Height="100"
                    Background="{StaticResource SecondaryBackground}"
                    DisplayMemberPath="Name"
                    Foreground="{StaticResource MainForeground}"
                    SelectionMode="Multiple" />
                </StackPanel>

                <!--  Board Filter  -->
                <StackPanel Grid.Column="2">
                  <TextBlock Margin="0,0,0,5" FontSize="16"
                    FontWeight="SemiBold"
                    Foreground="{StaticResource MainForeground}"
                    Text="TABLERO" />
                  <ListBox x:Name="lstBoards" Height="100"
                    Background="{StaticResource SecondaryBackground}"
                    DisplayMemberPath="Name"
                    Foreground="{StaticResource MainForeground}"
                    SelectionMode="Multiple" />
                </StackPanel>
              </Grid>

              <!--  Saved Filters  -->
              <Grid Margin="15,10">
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="2*" />
                  <ColumnDefinition Width="10" />
                  <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0">
                  <TextBlock Margin="0,0,0,5" FontSize="16"
                    FontWeight="SemiBold"
                    Foreground="{StaticResource MainForeground}"
                    Text="FILTROS GUARDADOS" />
                  <ComboBox x:Name="cmbSavedFilters" Height="35"
                    DisplayMemberPath="Name" FontSize="16"
                    SelectionChanged="cmbSavedFilters_SelectionChanged"
                    Style="{StaticResource DarkSimpleComboBox}" />
                </StackPanel>

                <StackPanel Grid.Column="2">
                  <TextBlock Margin="0,0,0,5" FontSize="16" Text=" " />
                  <Button x:Name="btnSaveFilter" Height="35"
                    Click="btnSaveFilter_Click" Content="Guardar Filtro"
                    Style="{StaticResource FunctionButtonStyle}" />
                </StackPanel>
              </Grid>

            </StackPanel>
          </Border>
        </ScrollViewer>

        <!--  Results Grid  -->
        <Border Grid.Row="1" Margin="10,10,10,10"
          Background="{StaticResource SecondaryBackground}" CornerRadius="12">
          <Grid>
            <Grid.RowDefinitions>
              <RowDefinition Height="Auto" />
              <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <TextBlock Grid.Row="0" Margin="15,10" FontSize="20"
              FontWeight="Bold" Foreground="{StaticResource MainForeground}"
              Text="RESULTADOS" />

            <DataGrid x:Name="dgResults" Grid.Row="1" Margin="10"
              AlternatingRowBackground="{StaticResource MainBackground}"
              AutoGenerateColumns="False"
              Background="{StaticResource SecondaryBackground}"
              BorderThickness="0" CanUserAddRows="False"
              Foreground="{StaticResource MainForeground}"
              GridLinesVisibility="None" HeadersVisibility="Column"
              IsReadOnly="True" MouseDoubleClick="dgResults_MouseDoubleClick"
              RowBackground="{StaticResource SecondaryBackground}"
              SelectionMode="Single" Style="{StaticResource ModernDarkDataGridStyle}" ColumnHeaderStyle="{StaticResource ModernDarkDataGridColumnHeaderStyle}"
              CellStyle="{StaticResource ModernDarkDataGridCellStyle}" RowStyle="{StaticResource ModernDarkDataGridRowStyle}">
              <DataGrid.Columns>
                <DataGridTextColumn Width="2*" Binding="{Binding Title}"
                  Header="Título" />
                <DataGridTextColumn Width="2*" Binding="{Binding Description}"
                  Header="Descripción" />
                <DataGridTextColumn Width="*" Binding="{Binding Tag}"
                  Header="Tag" />
                <DataGridTextColumn Width="*" Binding="{Binding Priority}"
                  Header="Prioridad" />
                <DataGridTextColumn Width="*"
                  Binding="{Binding EndDate, StringFormat=\{0:dd/MM/yyyy\}}"
                  Header="Fecha Límite" />
              </DataGrid.Columns>
            </DataGrid>
          </Grid>
        </Border>

        <!--  Action Buttons  -->
        <Grid Grid.Row="2">
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
          </Grid.ColumnDefinitions>

          <Button x:Name="btnClear" Grid.Column="0" Margin="10,4,5,4"
            Click="btnClear_Click" Content="Limpiar"
            Style="{StaticResource FunctionButtonStyle}" />
          <Button x:Name="btnSearch" Grid.Column="1" Margin="5,4"
            Click="btnSearch_Click" Content="Buscar"
            Style="{StaticResource FunctionButtonStyle}" />
          <Button x:Name="btnClose" Grid.Column="2" Margin="5,4,10,4"
            Click="btnClose_Click" Content="Cerrar"
            Style="{StaticResource FunctionButtonStyle}" />
        </Grid>
      </Grid>
    </Grid>
  </Border>
</Window>